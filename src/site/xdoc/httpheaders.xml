<?xml version="1.0" encoding="UTF-8"?>
<document>
	<properties>
		<title>HTTP headers support</title>
		<author email="francois-xavier.bonnet@centraliens.net">Francois-Xavier Bonnet</author>
	</properties>
	<body>
	<h1>HTTP headers support</h1>
		<section name="Request headers">
			<p>
				Some request headers are forwarded to the target server, some are
				ignored and some are transformed. Here is the list of supported
				Request HTTP headers. Any other header would be ignored.
				<table>
					<tr>
						<th>Request header</th>
						<th>Action</th>
					</tr>
					<tr>
						<td>Accept</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Accept-Charset</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Accept-Encoding</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Accept-Language</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Authorization</td>
						<td>
							Not forwarded. See 
							<a href="authentication.html">authentication</a>
						</td>
					</tr>
					<tr>
						<td>Cache-control</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Connection</td>
						<td>Not forwarded. The value will always be "keep-alive" as managed by the HTTP client</td>
					</tr>
					<tr>
						<td>Content-Encoding</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Content-Language</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Content-Length</td>
						<td>Not forwarded. Managed automatically by the HTTP client. Usually chunked content encoding will be used (see <a href="http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/entity/AbstractHttpEntity.html#setChunked%28boolean%29">HttpEntity.setChunked</a></td>
					</tr>
					<tr>
						<td>Content-MD5</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Content-Range</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Content-Type</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Cookie</td>
						<td>Depends on cookie configuration. By default not forwarded because cookies are kept into session (see <a href="cookies.html">Cookies</a>)</td>
					</tr>
					<tr>
						<td>Date</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Expect</td>
						<td>Not supported: replies with a 417 (Expectation Failed) as required by HTTP specification</td>
					</tr>
					<tr>
						<td>From</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Host</td>
						<td>Default ignored, depends on preserveHost parameter</td>
					</tr>
					<tr>
						<td>If-Match</td>
						<td>Not forwarded</td>
					</tr>
					<tr>
						<td>If-Modified-Since</td>
						<td>
							All cache validator are recalculated by the cache (see
							<a href="cache.html">Cache</a>)
						</td>
					</tr>
					<tr>
						<td>If-None-Match</td>
						<td>
							All cache validator are recalculated by the cache (see
							<a href="cache.html">Cache</a>)
						</td>
					</tr>
					<tr>
						<td>If-Range</td>
						<td>Not forwarded (Ranges not supported)</td>
					</tr>
					<tr>
						<td>If-Unmodified-Since</td>
						<td>Not forwarded</td>
					</tr>
					<tr>
						<td>Max-Forwards</td>
						<td>Not forwarded</td>
					</tr>
					<tr>
						<td>Pragma</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Proxy-Authorization</td>
						<td>Not forwarded</td>
					</tr>
					<tr>
						<td>Range</td>
						<td>Not forwarded (Ranges not supported)</td>
					</tr>
					<tr>
						<td>Referer</td>
						<td>Rewritten</td>
					</tr>
					<tr>
						<td>TE</td>
						<td>Not forwarded (chunked encoding managed by the container)</td>
					</tr>
					<tr>
						<td>Trailer</td>
						<td>Not forwarded (chunked encoding managed by the container)</td>
					</tr>
					<tr>
						<td>Transfer-Encoding</td>
						<td>Not forwarded (chunked encoding managed by the container)</td>
					</tr>
					<tr>
						<td>Upgrade</td>
						<td>Not forwarded</td>
					</tr>
					<tr>
						<td>User-Agent</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Warning</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>X-Forwarded-For</td>
						<td>Forwarded or created if not present.</td>
					</tr>
				</table>
			</p>
		</section>
		<section name="Response headers">
			<p>
				Some of the response headers sent by the target servers are
				forwarded to the browser, some are ignored, some are transformed and
				some are used for
				<a href="cache.html">Cache</a>
				management. Any header not in the following
				list would be ignored.
				<table>
					<tr>
						<th>Response header</th>
						<th>Action</th>
					</tr>
					<tr>
						<td>Age</td>
						<td>Not forwarded</td>
					</tr>
					<tr>
						<td>Allow</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Cache-control</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Connection</td>
						<td>Not forwarded (keep-alive managed by the servlet container)</td>
					</tr>
					<tr>
						<td>Content-Disposition</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Content-Encoding</td>
						<td>Not forwarded (gzip responses are decompressed by HTTP client)</td>
					</tr>
					<tr>
						<td>Content-Language</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Content-Length</td>
						<td>Recalculated by the servlet container (usually set if content length is less than the buffer size)</td>
					</tr>
					<tr>
						<td>Content-Location</td>
						<td>Rewritten</td>
					</tr>
					<tr>
						<td>Content-MD5</td>
						<td>Not forwarded</td>
					</tr>
					<tr>
						<td>Content-Range</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Content-Type</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Date</td>
						<td>Set automatically by the servlet container</td>
					</tr>
					<tr>
						<td>Expires</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>E-tag</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Keep-Alive</td>
						<td>Not forwarded (managed by the servlet container)</td>
					</tr>
					<tr>
						<td>Last-modified</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Location</td>
						<td>Rewritten</td>
					</tr>
					<tr>
						<td>Link</td>
						<td>Rewritten</td>
					</tr>
					<tr>
						<td>P3p</td>
						<td>Rewritten</td>
					</tr>
					<tr>
						<td>Proxy-Authenticate</td>
						<td>
							Not forwarded, see
							<a href="authentication.html">authentication</a>
						</td>
					</tr>
					<tr>
						<td>Refresh</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Retry-After</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Server</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Set-Cookie</td>
						<td>Depends on cookie configuration. By default not forwarded because cookies are kept into session (see <a href="cookies.html">Cookies</a>)</td>
					</tr>
					<tr>
						<td>Trailer</td>
						<td>Not forwarded (chunked encoding managed by the container)</td>
					</tr>
					<tr>
						<td>Transfer-Encoding</td>
						<td>Not forwarded (chunked encoding managed by the container)</td>
					</tr>
					<tr>
						<td>Vary</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Via</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>Warning</td>
						<td>Forwarded</td>
					</tr>
					<tr>
						<td>WWW-Authenticate</td>
						<td>
							Not forwarded, see
							<a href="authentication.html">authentication</a>
						</td>
					</tr>
				</table>
			</p>
		</section>
	</body>
</document>